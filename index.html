<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IRN</title>

<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
margin:0;font-family:'Vazirmatn',sans-serif;text-align:center;
background:linear-gradient(-45deg,#ff7e5f,#feb47b);
color:#222;
}
.container{padding:20px;}
.card{margin:15px auto;padding:20px;border-radius:18px;max-width:520px;
background:#ffffffd9;box-shadow:0 10px 25px rgba(0,0,0,.2);}
.message{background:#fff;padding:10px;border-radius:10px;margin-top:10px;}
.userTag{display:inline-block;background:#eee;padding:5px 10px;border-radius:8px;margin:4px;}
.stats{padding:10px;background:#fff;border-radius:12px;margin-bottom:10px;}
</style>
</head>

<body>

<div class="container">

<h1>ğŸ‘‹ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ Ø¨Ù‡ IRN</h1>

<div class="stats">
ğŸ“Š Ø¨Ø§Ø²Ø¯ÛŒØ¯: <span id="views"></span> |
ğŸ’¬ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§: <span id="msgCount"></span> |
ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„: <span id="userCount"></span>
</div>

<div class="card">
<h3>ğŸ’¬ Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù†</h3>
<input id="username" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§">
<input id="messageInput" placeholder="Ù¾ÛŒØ§Ù… Ø¨Ù†ÙˆÛŒØ³">
<button onclick="sendMessage()">Ø§Ø±Ø³Ø§Ù„</button>

<h4>ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</h4>
<div id="users"></div>

<h4>ğŸ“¨ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</h4>
<div id="messages"></div>
</div>

</div>

<script>
// Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø§Ø² 895
let views = parseInt(localStorage.getItem("views") || 895) + 1;
localStorage.setItem("views", views);
document.getElementById("views").innerText = views;

// Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
let messages = JSON.parse(localStorage.getItem("messages")) || [];
let users = JSON.parse(localStorage.getItem("users")) || [];

function render(){
    // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
    let msgBox=document.getElementById("messages");
    msgBox.innerHTML="";
    messages.forEach(m=>{
        msgBox.innerHTML+=`<div class="message"><b>${m.user}</b>: ${m.text}</div>`;
    });

    // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    let userBox=document.getElementById("users");
    userBox.innerHTML="";
    users.forEach(u=>{
        userBox.innerHTML+=`<span class="userTag">${u}</span>`;
    });

    // Ø¢Ù…Ø§Ø±
    document.getElementById("msgCount").innerText=messages.length;
    document.getElementById("userCount").innerText=users.length;
}

function sendMessage(){
    let user=username.value.trim();
    let text=messageInput.value.trim();
    if(!user || !text) return alert("Ù†Ø§Ù… Ùˆ Ù¾ÛŒØ§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†");

    // Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ§Ù…
    messages.push({user,text});
    localStorage.setItem("messages",JSON.stringify(messages));

    // Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§Ú¯Ø± Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø´Ø¯
    if(!users.includes(user)){
        users.push(user);
        localStorage.setItem("users",JSON.stringify(users));
    }

    messageInput.value="";
    render();
}

render();
</script>

</body>
</html>
