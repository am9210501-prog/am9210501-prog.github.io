<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù† Ø®ÙÙ† ğŸ˜</title>

<style>
body {
    font-family: Tahoma;
    margin: 0;
    background: linear-gradient(120deg,#4facfe,#00f2fe);
    transition: 0.3s;
}

.dark {
    background: #111;
    color: white;
}

header {
    background: #222;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 22px;
}

.container {
    max-width: 700px;
    margin: auto;
    padding: 15px;
}

.stats {
    background: white;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 10px;
}

.dark .stats {
    background: #222;
}

input, button {
    padding: 10px;
    border-radius: 8px;
    border: none;
    margin: 5px;
}

button {
    background: #4facfe;
    color: white;
    cursor: pointer;
}

.message {
    background: white;
    padding: 10px;
    border-radius: 10px;
    margin-top: 10px;
    animation: fadeIn 0.4s;
}

.dark .message {
    background: #333;
}

@keyframes fadeIn {
    from {opacity:0; transform:translateY(10px);}
    to {opacity:1;}
}

.actions {
    margin-top: 5px;
    font-size: 14px;
}

.like {
    color: red;
    cursor: pointer;
    margin-left: 10px;
}

.delete {
    color: gray;
    cursor: pointer;
}
</style>
</head>

<body>

<header>
ğŸ’¬ Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù† Ø®ÙÙ†
<button onclick="toggleDark()">ğŸŒ™</button>
</header>

<div class="container">

<div class="stats">
ğŸ‘€ Ø¨Ø§Ø²Ø¯ÛŒØ¯: <span id="views">0</span> |
ğŸ’¬ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§: <span id="count">0</span>
</div>

<input id="username" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§">
<input id="search" placeholder="Ø¬Ø³ØªØ¬Ùˆ..." onkeyup="searchMessages()">

<div>
<input id="messageInput" placeholder="Ù¾ÛŒØ§Ù… Ø¨Ù†ÙˆÛŒØ³...">
<button onclick="sendMessage()">Ø§Ø±Ø³Ø§Ù„</button>
</div>

<div id="messages"></div>

</div>

<script>
let messages = JSON.parse(localStorage.getItem("messages")) || [];
let views = localStorage.getItem("views") || 0;

// Ø§ÙØ²Ø§ÛŒØ´ Ø¨Ø§Ø²Ø¯ÛŒØ¯
views++;
localStorage.setItem("views", views);
document.getElementById("views").innerText = views;

function save() {
    localStorage.setItem("messages", JSON.stringify(messages));
    document.getElementById("count").innerText = messages.length;
}

function renderMessages(list = messages) {
    let box = document.getElementById("messages");
    box.innerHTML = "";
    list.forEach((msg, index) => {
        box.innerHTML += `
        <div class="message">
            <b>${msg.user}</b>: ${msg.text}
            <div class="actions">
                â¤ï¸ <span onclick="like(${index})">${msg.likes}</span>
                <span class="delete" onclick="removeMsg(${index})">ğŸ—‘ Ø­Ø°Ù</span>
            </div>
        </div>`;
    });
    save();
}

function sendMessage() {
    let text = document.getElementById("messageInput").value;
    let user = document.getElementById("username").value || "Ù†Ø§Ø´Ù†Ø§Ø³";

    if (text === "") return;

    messages.push({user, text, likes: 0});
    document.getElementById("messageInput").value = "";

    renderMessages();
    notify("Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…");
}

function like(i) {
    messages[i].likes++;
    renderMessages();
}

function removeMsg(i) {
    messages.splice(i, 1);
    renderMessages();
}

function toggleDark() {
    document.body.classList.toggle("dark");
}

function searchMessages() {
    let q = document.getElementById("search").value.toLowerCase();
    let filtered = messages.filter(m => m.text.toLowerCase().includes(q));
    renderMessages(filtered);
}

function notify(text) {
    if (Notification.permission === "granted") {
        new Notification(text);
    } else {
        Notification.requestPermission();
    }
}

renderMessages();
</script>

</body>
</html>
